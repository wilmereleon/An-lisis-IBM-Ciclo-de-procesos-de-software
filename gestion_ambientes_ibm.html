<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Ambientes - IBM Quality Management</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cpath fill='%230043ce' d='M12 2h8v8h-8V2zm0 10h8v8h-8v-8zm0 10h8v8h-8v-8zM2 12h8v8H2v-8zm20 0h8v8h-8v-8z'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cpath fill='%230043ce' d='M12 2h8v8h-8V2zm0 10h8v8h-8v-8zm0 10h8v8h-8v-8zM2 12h8v8H2v-8zm20 0h8v8h-8v-8z'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="https://unpkg.com/carbon-components/css/carbon-components.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --ibm-blue: #0f62fe;
            --ibm-blue-60: #0043ce;
            --ibm-blue-10: #edf5ff;
            --ibm-gray-100: #161616;
            --ibm-gray-80: #393939;
            --ibm-gray-10: #f4f4f4;
            --ibm-green: #24a148;
            --ibm-red: #da1e28;
            --ibm-yellow: #f1c21b;
            --ibm-orange: #ff832b;
        }

        body {
            font-family: 'IBM Plex Sans', sans-serif;
            background-color: var(--ibm-gray-10);
            margin: 0;
            padding: 0;
        }

        .header {
            background: var(--ibm-blue-60);
            color: white;
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1584px;
            margin: 0 auto;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .header-title h1 {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 400;
            color: white;
        }

        .watson-icon {
            width: 32px;
            height: 32px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .header-actions .bx--btn {
            height: 40px;
            min-width: 4rem;
        }

        .main-content {
            max-width: 1584px;
            margin: 0 auto;
            padding: 1.5rem;
            display: grid;
            gap: 1.5rem;
        }

        .environment-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .env-card {
            background: white;
            border-radius: 0;
            padding: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
            border-left: 3px solid var(--ibm-blue);
            transition: box-shadow 0.15s ease;
            border-top: 1px solid #e0e0e0;
            border-right: 1px solid #e0e0e0;
            border-bottom: 1px solid #e0e0e0;
        }

        .env-card:hover {
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .env-card.healthy { border-left-color: var(--ibm-green); }
        .env-card.warning { border-left-color: var(--ibm-yellow); }
        .env-card.error { border-left-color: var(--ibm-red); }
        .env-card.maintenance { border-left-color: var(--ibm-orange); }

        .env-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .env-name {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--ibm-gray-100);
        }

        .env-status {
            padding: 0.25rem 0.75rem;
            border-radius: 16px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-healthy { background: rgba(36, 161, 72, 0.1); color: var(--ibm-green); }
        .status-warning { background: rgba(241, 194, 27, 0.1); color: var(--ibm-yellow); }
        .status-error { background: rgba(218, 30, 40, 0.1); color: var(--ibm-red); }
        .status-maintenance { background: rgba(255, 131, 43, 0.1); color: var(--ibm-orange); }

        .env-details {
            display: grid;
            gap: 0.75rem;
        }

        .env-detail {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .env-detail:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: var(--ibm-gray-80);
            font-size: 0.875rem;
        }

        .detail-value {
            font-weight: 600;
            color: var(--ibm-gray-100);
        }

        .env-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .env-actions .bx--btn {
            flex: 1;
            min-width: 0;
            font-size: 0.75rem;
            padding: 0.5rem 0.75rem;
            height: auto;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .env-actions .bx--btn--sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            line-height: 1.2;
        }

        .tabs {
            background: white;
            border-radius: 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }

        .tab-list {
            display: flex;
            background: #f4f4f4;
            border-bottom: 1px solid #e0e0e0;
        }

        .tab-button {
            flex: 1;
            padding: 0.875rem 1rem;
            border: none;
            background: transparent;
            cursor: pointer;
            font-weight: 400;
            font-size: 0.875rem;
            color: var(--ibm-gray-100);
            transition: all 0.11s ease;
            border-bottom: 2px solid transparent;
            border-right: 1px solid #e0e0e0;
        }

        .tab-button:last-child {
            border-right: none;
        }

        .tab-button.active {
            background: white;
            color: var(--ibm-blue);
            border-bottom-color: var(--ibm-blue);
            font-weight: 600;
        }

        .tab-button:hover:not(.active) {
            background: #e8e8e8;
            color: var(--ibm-blue);
        }

        .tab-content {
            padding: 1.5rem;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .monitoring-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        .monitoring-chart {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .chart-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e0e0e0;
        }

        .chart-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--ibm-gray-100);
        }

        .metrics-panel {
            display: grid;
            gap: 1rem;
        }

        .metric-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--ibm-blue);
            margin-bottom: 0.5rem;
        }

        .metric-label {
            color: var(--ibm-gray-80);
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }

        .metric-trend {
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
        }

        .trend-up { color: var(--ibm-green); }
        .trend-down { color: var(--ibm-red); }

        .deployment-section {
            display: grid;
            gap: 2rem;
        }

        .deployment-form {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--ibm-gray-100);
        }

        .form-group select,
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 0.875rem;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .deployment-history {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .deployment-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            background: var(--ibm-gray-10);
        }

        .deployment-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
        }

        .deployment-icon.success { background: rgba(36, 161, 72, 0.1); color: var(--ibm-green); }
        .deployment-icon.failed { background: rgba(218, 30, 40, 0.1); color: var(--ibm-red); }
        .deployment-icon.pending { background: rgba(241, 194, 27, 0.1); color: var(--ibm-yellow); }

        .deployment-info {
            flex: 1;
        }

        .deployment-title {
            font-weight: 600;
            color: var(--ibm-gray-100);
            margin-bottom: 0.25rem;
        }

        .deployment-meta {
            color: var(--ibm-gray-80);
            font-size: 0.875rem;
        }

        .config-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .config-panel {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .config-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .config-item:last-child {
            border-bottom: none;
        }

        .config-label {
            font-weight: 500;
            color: var(--ibm-gray-100);
        }

        .config-value {
            color: var(--ibm-gray-80);
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.875rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 0;
            max-width: 672px;
            width: 90%;
            max-height: 84vh;
            overflow-y: auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border: 1px solid #e0e0e0;
        }

        .modal-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f4f4f4;
        }

        .modal-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--ibm-gray-100);
            margin: 0;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--ibm-gray-10);
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--ibm-blue);
            transition: width 0.3s ease;
            width: 0%;
        }

        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 1rem 1.5rem;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            z-index: 1001;
            display: none;
            align-items: center;
            gap: 0.75rem;
        }

        .notification.success { border-left: 4px solid var(--ibm-green); }
        .notification.error { border-left: 4px solid var(--ibm-red); }
        .notification.warning { border-left: 4px solid var(--ibm-yellow); }

        @media (max-width: 768px) {
            .main-content { padding: 1rem; }
            .monitoring-grid { grid-template-columns: 1fr; }
            .config-section { grid-template-columns: 1fr; }
            .environment-overview { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-title">
                <div class="watson-icon">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 32 32">
                        <path d="M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26A12,12,0,1,1,28,16,12,12,0,0,1,16,28Z"/>
                        <circle cx="16" cy="10" r="2"/>
                        <path d="M16,14a6,6,0,0,0-6,6v2h2V20a4,4,0,0,1,8,0v2h2V20A6,6,0,0,0,16,14Z"/>
                    </svg>
                </div>
                <h1>Gestión de Ambientes</h1>
            </div>
            <div class="header-actions">
                <button class="bx--btn bx--btn--primary" onclick="createEnvironment()">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 32 32">
                        <path d="M17,15V8H15v7H8v2h7v7h2V17h7V15Z"/>
                    </svg>
                    Nuevo Ambiente
                </button>
                <button class="bx--btn bx--btn--secondary" onclick="refreshAllEnvironments()">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 32 32">
                        <path d="M18,28A12,12,0,1,1,30,16H28A10,10,0,1,0,18,6V2l5,4-5,4V6Z"/>
                    </svg>
                    Actualizar
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Environment Overview -->
        <section class="environment-overview">
            <div class="env-card healthy">
                <div class="env-header">
                    <h3 class="env-name">Desarrollo</h3>
                    <span class="env-status status-healthy">Operativo</span>
                </div>
                <div class="env-details">
                    <div class="env-detail">
                        <span class="detail-label">URL</span>
                        <span class="detail-value">dev.ibm-quality.com</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Versión</span>
                        <span class="detail-value">v2.1.0-beta</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">CPU</span>
                        <span class="detail-value">45%</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Memoria</span>
                        <span class="detail-value">2.1GB / 4GB</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Último Deploy</span>
                        <span class="detail-value">Hace 2 horas</span>
                    </div>
                </div>
                <div class="env-actions">
                    <button class="bx--btn bx--btn--sm bx--btn--secondary" onclick="monitorEnvironment('dev')">Monitor</button>
                    <button class="bx--btn bx--btn--sm bx--btn--secondary" onclick="deployToEnvironment('dev')">Deploy</button>
                    <button class="bx--btn bx--btn--sm bx--btn--tertiary" onclick="configureEnvironment('dev')">Config</button>
                </div>
            </div>

            <div class="env-card warning">
                <div class="env-header">
                    <h3 class="env-name">Testing</h3>
                    <span class="env-status status-warning">Alerta</span>
                </div>
                <div class="env-details">
                    <div class="env-detail">
                        <span class="detail-label">URL</span>
                        <span class="detail-value">test.ibm-quality.com</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Versión</span>
                        <span class="detail-value">v2.0.5</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">CPU</span>
                        <span class="detail-value">78%</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Memoria</span>
                        <span class="detail-value">7.2GB / 8GB</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Último Deploy</span>
                        <span class="detail-value">Hace 6 horas</span>
                    </div>
                </div>
                <div class="env-actions">
                    <button class="bx--btn bx--btn--sm bx--btn--secondary" onclick="monitorEnvironment('test')">Monitor</button>
                    <button class="bx--btn bx--btn--sm bx--btn--secondary" onclick="deployToEnvironment('test')">Deploy</button>
                    <button class="bx--btn bx--btn--sm bx--btn--tertiary" onclick="configureEnvironment('test')">Config</button>
                </div>
            </div>

            <div class="env-card healthy">
                <div class="env-header">
                    <h3 class="env-name">Staging</h3>
                    <span class="env-status status-healthy">Operativo</span>
                </div>
                <div class="env-details">
                    <div class="env-detail">
                        <span class="detail-label">URL</span>
                        <span class="detail-value">staging.ibm-quality.com</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Versión</span>
                        <span class="detail-value">v2.0.5</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">CPU</span>
                        <span class="detail-value">32%</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Memoria</span>
                        <span class="detail-value">4.8GB / 16GB</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Último Deploy</span>
                        <span class="detail-value">Hace 1 día</span>
                    </div>
                </div>
                <div class="env-actions">
                    <button class="bx--btn bx--btn--sm bx--btn--secondary" onclick="monitorEnvironment('staging')">Monitor</button>
                    <button class="bx--btn bx--btn--sm bx--btn--secondary" onclick="deployToEnvironment('staging')">Deploy</button>
                    <button class="bx--btn bx--btn--sm bx--btn--tertiary" onclick="configureEnvironment('staging')">Config</button>
                </div>
            </div>

            <div class="env-card maintenance">
                <div class="env-header">
                    <h3 class="env-name">Producción</h3>
                    <span class="env-status status-maintenance">Mantenimiento</span>
                </div>
                <div class="env-details">
                    <div class="env-detail">
                        <span class="detail-label">URL</span>
                        <span class="detail-value">ibm-quality.com</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Versión</span>
                        <span class="detail-value">v2.0.4</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">CPU</span>
                        <span class="detail-value">15%</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Memoria</span>
                        <span class="detail-value">12GB / 32GB</span>
                    </div>
                    <div class="env-detail">
                        <span class="detail-label">Último Deploy</span>
                        <span class="detail-value">Hace 3 días</span>
                    </div>
                </div>
                <div class="env-actions">
                    <button class="bx--btn bx--btn--sm bx--btn--secondary" onclick="monitorEnvironment('prod')">Monitor</button>
                    <button class="bx--btn bx--btn--sm bx--btn--secondary" onclick="deployToEnvironment('prod')">Deploy</button>
                    <button class="bx--btn bx--btn--sm bx--btn--tertiary" onclick="configureEnvironment('prod')">Config</button>
                </div>
            </div>
        </section>

        <!-- Tabs Section -->
        <section class="tabs">
            <div class="tab-list">
                <button class="tab-button active" onclick="switchTab('monitoring')">
                    <i class="fas fa-chart-line"></i> Monitoreo
                </button>
                <button class="tab-button" onclick="switchTab('deployment')">
                    <i class="fas fa-rocket"></i> Deployment
                </button>
                <button class="tab-button" onclick="switchTab('configuration')">
                    <i class="fas fa-cogs"></i> Configuración
                </button>
                <button class="tab-button" onclick="switchTab('automation')">
                    <i class="fas fa-robot"></i> Automatización
                </button>
            </div>

            <!-- Monitoring Tab -->
            <div id="monitoring" class="tab-content active">
                <div class="monitoring-grid">
                    <div class="monitoring-chart">
                        <div class="chart-header">
                            <h3 class="chart-title">Performance de Ambientes</h3>
                            <select class="bx--select-input" id="timeRange">
                                <option value="1h">Última hora</option>
                                <option value="24h" selected>Últimas 24 horas</option>
                                <option value="7d">Última semana</option>
                                <option value="30d">Último mes</option>
                            </select>
                        </div>
                        <canvas id="performanceChart" width="400" height="200"></canvas>
                    </div>

                    <div class="metrics-panel">
                        <div class="metric-card">
                            <div class="metric-value">98.5%</div>
                            <div class="metric-label">Uptime General</div>
                            <div class="metric-trend trend-up">
                                <i class="fas fa-arrow-up"></i> +0.2%
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-value">245ms</div>
                            <div class="metric-label">Tiempo de Respuesta</div>
                            <div class="metric-trend trend-down">
                                <i class="fas fa-arrow-down"></i> -15ms
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-value">12</div>
                            <div class="metric-label">Deployments Hoy</div>
                            <div class="metric-trend trend-up">
                                <i class="fas fa-arrow-up"></i> +3
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-value">0</div>
                            <div class="metric-label">Incidentes Activos</div>
                            <div class="metric-trend trend-down">
                                <i class="fas fa-arrow-down"></i> -2
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Deployment Tab -->
            <div id="deployment" class="tab-content">
                <div class="deployment-section">
                    <div class="deployment-form">
                        <h3>Nuevo Deployment</h3>
                        <div class="form-group">
                            <label for="targetEnvironment">Ambiente Destino</label>
                            <select id="targetEnvironment">
                                <option value="dev">Desarrollo</option>
                                <option value="test">Testing</option>
                                <option value="staging">Staging</option>
                                <option value="prod">Producción</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="deploymentVersion">Versión</label>
                            <input type="text" id="deploymentVersion" placeholder="v2.1.0" value="v2.1.0">
                        </div>
                        <div class="form-group">
                            <label for="deploymentBranch">Branch/Tag</label>
                            <input type="text" id="deploymentBranch" placeholder="main" value="main">
                        </div>
                        <div class="form-group">
                            <label for="deploymentNotes">Notas del Deployment</label>
                            <textarea id="deploymentNotes" placeholder="Descripción de los cambios incluidos en este deployment..."></textarea>
                        </div>
                        <div class="form-group">
                            <button class="bx--btn bx--btn--primary" onclick="startDeployment()">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 32 32">
                                    <path d="M16,2l7,7H18v8H14V9H9Z"/>
                                    <path d="M26,20v8H6V20H4v8a2,2,0,0,0,2,2H26a2,2,0,0,0,2-2V20Z"/>
                                </svg>
                                Iniciar Deployment
                            </button>
                        </div>
                    </div>

                    <div class="deployment-history">
                        <h3>Historial de Deployments</h3>
                        <div class="deployment-item">
                            <div class="deployment-icon success">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="deployment-info">
                                <div class="deployment-title">v2.1.0-beta → Desarrollo</div>
                                <div class="deployment-meta">Hace 2 horas • Juan Pérez • Exitoso</div>
                            </div>
                        </div>

                        <div class="deployment-item">
                            <div class="deployment-icon success">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="deployment-info">
                                <div class="deployment-title">v2.0.5 → Testing</div>
                                <div class="deployment-meta">Hace 6 horas • María García • Exitoso</div>
                            </div>
                        </div>

                        <div class="deployment-item">
                            <div class="deployment-icon failed">
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="deployment-info">
                                <div class="deployment-title">v2.0.6-rc1 → Staging</div>
                                <div class="deployment-meta">Hace 8 horas • Carlos López • Falló</div>
                            </div>
                        </div>

                        <div class="deployment-item">
                            <div class="deployment-icon success">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="deployment-info">
                                <div class="deployment-title">v2.0.5 → Staging</div>
                                <div class="deployment-meta">Hace 1 día • María García • Exitoso</div>
                            </div>
                        </div>

                        <div class="deployment-item">
                            <div class="deployment-icon success">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="deployment-info">
                                <div class="deployment-title">v2.0.4 → Producción</div>
                                <div class="deployment-meta">Hace 3 días • DevOps Team • Exitoso</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configuration Tab -->
            <div id="configuration" class="tab-content">
                <div class="config-section">
                    <div class="config-panel">
                        <h3>Configuración de Ambientes</h3>
                        <div class="config-item">
                            <span class="config-label">Base de Datos</span>
                            <span class="config-value">PostgreSQL 13.4</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Cache</span>
                            <span class="config-value">Redis 6.2</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Message Queue</span>
                            <span class="config-value">RabbitMQ 3.9</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Load Balancer</span>
                            <span class="config-value">NGINX 1.20</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Container Runtime</span>
                            <span class="config-value">Docker 20.10</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">Orchestration</span>
                            <span class="config-value">Kubernetes 1.24</span>
                        </div>
                    </div>

                    <div class="config-panel">
                        <h3>Variables de Entorno</h3>
                        <div class="config-item">
                            <span class="config-label">DB_HOST</span>
                            <span class="config-value">db.ibm-quality.internal</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">REDIS_URL</span>
                            <span class="config-value">redis://cache.internal:6379</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">API_BASE_URL</span>
                            <span class="config-value">https://api.ibm-quality.com</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">LOG_LEVEL</span>
                            <span class="config-value">INFO</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">MAX_CONNECTIONS</span>
                            <span class="config-value">100</span>
                        </div>
                        <div class="config-item">
                            <span class="config-label">TIMEOUT</span>
                            <span class="config-value">30s</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Automation Tab -->
            <div id="automation" class="tab-content">
                <div class="automation-section">
                    <h3>Automatización de Ambientes</h3>
                    <p>Configuración de pipelines automáticos y reglas de deployment.</p>
                    <!-- Content will be added here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Create Environment Modal -->
    <div id="createEnvironmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Crear Nuevo Ambiente</h2>
                <button class="bx--btn bx--btn--ghost" onclick="closeModal('createEnvironmentModal')">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 32 32">
                        <path d="M24,9.4,22.6,8,16,14.6,9.4,8,8,9.4,14.6,16,8,22.6,9.4,24,16,17.4,22.6,24,24,22.6,17.4,16Z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newEnvName">Nombre del Ambiente</label>
                    <input type="text" id="newEnvName" placeholder="ej: pre-produccion">
                </div>
                <div class="form-group">
                    <label for="newEnvType">Tipo de Ambiente</label>
                    <select id="newEnvType">
                        <option value="development">Desarrollo</option>
                        <option value="testing">Testing</option>
                        <option value="staging">Staging</option>
                        <option value="production">Producción</option>
                        <option value="hotfix">Hotfix</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="newEnvUrl">URL Base</label>
                    <input type="text" id="newEnvUrl" placeholder="https://pre-prod.ibm-quality.com">
                </div>
                <div class="form-group">
                    <button class="bx--btn bx--btn--primary" onclick="createNewEnvironment()">
                        Crear Ambiente
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Deployment Modal -->
    <div id="deploymentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Progreso del Deployment</h2>
            </div>
            <div class="modal-body">
                <div class="deployment-status">
                    <p id="deploymentStatusText">Iniciando deployment...</p>
                    <div class="progress-bar">
                        <div class="progress-bar-fill" id="deploymentProgress"></div>
                    </div>
                </div>
                <div id="deploymentSteps" class="deployment-steps">
                    <!-- Steps will be added dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <span id="notificationMessage"></span>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // IBM Quality Data Manager (Reactive System)
        class IBMQualityDataManager {
            constructor() {
                this.observers = {};
                this.environments = [
                    { id: 'dev', name: 'Desarrollo', status: 'healthy', url: 'dev.ibm-quality.com', version: 'v2.1.0-beta' },
                    { id: 'test', name: 'Testing', status: 'warning', url: 'test.ibm-quality.com', version: 'v2.0.5' },
                    { id: 'staging', name: 'Staging', status: 'healthy', url: 'staging.ibm-quality.com', version: 'v2.0.5' },
                    { id: 'prod', name: 'Producción', status: 'maintenance', url: 'ibm-quality.com', version: 'v2.0.4' }
                ];
            }

            subscribe(event, callback) {
                if (!this.observers[event]) {
                    this.observers[event] = [];
                }
                this.observers[event].push(callback);
            }

            notify(event, data) {
                if (this.observers[event]) {
                    this.observers[event].forEach(callback => callback(data));
                }
            }

            getEnvironments() {
                return this.environments;
            }

            updateEnvironment(id, updates) {
                const env = this.environments.find(e => e.id === id);
                if (env) {
                    Object.assign(env, updates);
                    this.notify('environmentUpdated', { id, updates });
                }
            }
        }

        // Initialize Data Manager
        const dataManager = new IBMQualityDataManager();

        // Tab functionality
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Load tab-specific content
            if (tabName === 'monitoring') {
                initializePerformanceChart();
            }
        }

        // Initialize Performance Chart
        function initializePerformanceChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                    datasets: [
                        {
                            label: 'Desarrollo',
                            data: [85, 82, 78, 92, 88, 90, 87],
                            borderColor: '#24a148',
                            backgroundColor: 'rgba(36, 161, 72, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Testing',
                            data: [78, 76, 82, 85, 83, 79, 81],
                            borderColor: '#f1c21b',
                            backgroundColor: 'rgba(241, 194, 27, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Staging',
                            data: [92, 94, 91, 96, 93, 95, 94],
                            borderColor: '#0f62fe',
                            backgroundColor: 'rgba(15, 98, 254, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Producción',
                            data: [95, 97, 94, 98, 96, 97, 95],
                            borderColor: '#ff832b',
                            backgroundColor: 'rgba(255, 131, 43, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Environment management functions
        function createEnvironment() {
            document.getElementById('createEnvironmentModal').style.display = 'flex';
        }

        function createNewEnvironment() {
            const name = document.getElementById('newEnvName').value;
            const type = document.getElementById('newEnvType').value;
            const url = document.getElementById('newEnvUrl').value;

            if (!name || !url) {
                showNotification('Por favor complete todos los campos requeridos', 'error');
                return;
            }

            // Simulate environment creation
            showNotification(`Ambiente "${name}" creado exitosamente`, 'success');
            closeModal('createEnvironmentModal');

            // Clear form
            document.getElementById('newEnvName').value = '';
            document.getElementById('newEnvUrl').value = '';
        }

        function refreshAllEnvironments() {
            showNotification('Actualizando estado de todos los ambientes...', 'success');
            
            // Simulate refresh with progress
            setTimeout(() => {
                showNotification('Estados actualizados exitosamente', 'success');
            }, 2000);
        }

        function monitorEnvironment(envId) {
            showNotification(`Abriendo monitoreo detallado para ambiente ${envId}`, 'success');
            switchTab('monitoring');
        }

        function deployToEnvironment(envId) {
            const targetSelect = document.getElementById('targetEnvironment');
            targetSelect.value = envId;
            switchTab('deployment');
            showNotification(`Formulario de deployment preparado para ${envId}`, 'success');
        }

        function configureEnvironment(envId) {
            switchTab('configuration');
            showNotification(`Configuración cargada para ambiente ${envId}`, 'success');
        }

        // Deployment functions
        function startDeployment() {
            const environment = document.getElementById('targetEnvironment').value;
            const version = document.getElementById('deploymentVersion').value;
            const branch = document.getElementById('deploymentBranch').value;

            if (!version) {
                showNotification('Por favor especifique la versión a deployar', 'error');
                return;
            }

            // Show deployment modal
            document.getElementById('deploymentModal').style.display = 'flex';

            // Simulate deployment process
            simulateDeployment(environment, version, branch);
        }

        function simulateDeployment(environment, version, branch) {
            const statusText = document.getElementById('deploymentStatusText');
            const progressBar = document.getElementById('deploymentProgress');
            const stepsContainer = document.getElementById('deploymentSteps');

            const steps = [
                'Validando configuración...',
                'Construyendo imagen Docker...',
                'Ejecutando pruebas...',
                'Desplegando en ' + environment + '...',
                'Validando health checks...',
                'Deployment completado'
            ];

            let currentStep = 0;
            const stepInterval = setInterval(() => {
                if (currentStep < steps.length) {
                    statusText.textContent = steps[currentStep];
                    progressBar.style.width = ((currentStep + 1) / steps.length) * 100 + '%';

                    // Add step to list
                    const stepElement = document.createElement('div');
                    stepElement.textContent = `✓ ${steps[currentStep]}`;
                    stepElement.style.color = '#24a148';
                    stepElement.style.marginBottom = '0.5rem';
                    stepsContainer.appendChild(stepElement);

                    currentStep++;
                } else {
                    clearInterval(stepInterval);
                    setTimeout(() => {
                        closeModal('deploymentModal');
                        showNotification(`Deployment de ${version} completado exitosamente en ${environment}`, 'success');
                        
                        // Reset modal for next use
                        stepsContainer.innerHTML = '';
                        progressBar.style.width = '0%';
                    }, 1000);
                }
            }, 1500);
        }

        // Utility functions
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const messageElement = document.getElementById('notificationMessage');
            
            notification.className = `notification ${type}`;
            messageElement.textContent = message;
            notification.style.display = 'flex';

            setTimeout(() => {
                notification.style.display = 'none';
            }, 4000);
        }

        // Initialize chart when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializePerformanceChart();
            
            // Subscribe to data updates
            dataManager.subscribe('environmentUpdated', (data) => {
                console.log('Environment updated:', data);
                // Update UI accordingly
            });
        });

        // Auto-refresh every 30 seconds
        setInterval(() => {
            // Update metrics and status
            console.log('Auto-refreshing environment data...');
        }, 30000);
    </script>
</body>
</html>